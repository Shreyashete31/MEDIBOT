<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Symptom Checker - HealthHub</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #c37733;
      --primary-dark: #a35e26;
      --secondary-color: #53b49a;
      --accent-color: #e891a4;
      --warning-color: #d08e36;
      --danger-color: #b44f4f;
      --text-primary: #1f2a37;
      --text-secondary: #5c6b7a;
      --background: #ffe3cd;
      --surface: #ffffff;
      --border-color: #eab585;
      --shadow: 0 12px 30px rgba(195, 119, 51, 0.22);
      --shadow-hover: 0 18px 40px rgba(163, 94, 38, 0.3);
      --gradient-primary: linear-gradient(135deg, #ffcfa2 0%, #ffbadf 100%);
      --gradient-warning: linear-gradient(135deg, #d08e36, #a35e26);
      --gradient-danger: linear-gradient(135deg, #e78f8f, #b44f4f);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #ffdfc6 0%, #ffe0f2 100%);
      color: var(--text-primary);
      min-height: 100vh;
    }

    /* Header */
    .app-header {
      background: var(--gradient-warning);
      color: white;
      padding: 1rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: var(--shadow-hover);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .back-btn {
      background: rgba(255,255,255,0.2);
      border: none;
      color: white;
      padding: 0.5rem;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2rem;
      transition: background 0.3s ease;
    }

    .back-btn:hover {
      background: rgba(255,255,255,0.3);
    }

    .header-title {
      font-size: 1.5rem;
      font-weight: 600;
      margin: 0;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .ai-indicator {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(255,255,255,0.1);
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.9rem;
    }

    .ai-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #4caf50;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }

    /* Navigation */
    nav {
      background: var(--surface);
      padding: 0.75rem 1.5rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    nav a {
      color: var(--text-primary);
      text-decoration: none;
      font-weight: 500;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      background: var(--background);
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    nav a:hover, nav a.active {
      background: var(--primary-color);
      color: white;
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }

    /* Main Container */
    .container {
      padding: 2rem 1.5rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* Symptom Input Section */
    .symptom-section {
      background: var(--surface);
      padding: 2rem;
      border-radius: 16px;
      box-shadow: var(--shadow);
      margin-bottom: 2rem;
    }

    .section-title {
      font-size: 1.5rem;
      font-weight: 600;
      margin: 0 0 1.5rem;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .symptom-input {
      position: relative;
      margin-bottom: 1.5rem;
    }

    .symptom-input input {
      width: 100%;
      padding: 1rem 1rem 1rem 3rem;
      border: 2px solid var(--border-color);
      border-radius: 12px;
      font-size: 1rem;
      background: var(--surface);
      transition: all 0.3s ease;
      outline: none;
    }

    .symptom-input input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(0,150,136,0.1);
    }

    .symptom-input i {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-secondary);
    }

    .symptom-suggestions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .suggestion-tag {
      background: var(--background);
      border: 1px solid var(--border-color);
      color: var(--text-secondary);
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .suggestion-tag:hover {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    .check-button {
      width: 100%;
      background: var(--gradient-primary);
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 12px;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: 600;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .check-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }

    .check-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .check-button.loading {
      background: var(--gradient-warning);
    }

    /* Selected Symptoms */
    .selected-symptoms {
      background: var(--surface);
      padding: 1.5rem;
      border-radius: 16px;
      box-shadow: var(--shadow);
      margin-bottom: 2rem;
      display: none;
    }

    .selected-symptoms.show {
      display: block;
    }

    .selected-symptom {
      background: var(--gradient-primary);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.9rem;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      margin: 0.25rem;
    }

    .selected-symptom .remove-btn {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      font-size: 0.8rem;
      padding: 0.25rem;
      border-radius: 50%;
      transition: background 0.3s ease;
    }

    .selected-symptom .remove-btn:hover {
      background: rgba(255,255,255,0.2);
    }

    /* Results Section */
    .results-section {
      background: var(--surface);
      border-radius: 16px;
      box-shadow: var(--shadow);
      overflow: hidden;
      display: none;
    }

    .results-section.show {
      display: block;
      animation: slideUp 0.5s ease-out;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .results-header {
      background: var(--gradient-primary);
      color: white;
      padding: 1.5rem;
      text-align: center;
    }

    .results-title {
      font-size: 1.3rem;
      font-weight: 600;
      margin: 0 0 0.5rem;
    }

    .results-subtitle {
      font-size: 0.9rem;
      opacity: 0.9;
      margin: 0;
    }

    .results-content {
      padding: 2rem;
    }

    .severity-indicator {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
      padding: 1rem;
      border-radius: 8px;
      font-weight: 500;
    }

    .severity-indicator.low {
      background: rgba(76, 175, 80, 0.1);
      color: var(--secondary-color);
      border-left: 4px solid var(--secondary-color);
    }

    .severity-indicator.medium {
      background: rgba(255, 152, 0, 0.1);
      color: var(--warning-color);
      border-left: 4px solid var(--warning-color);
    }

    .severity-indicator.high {
      background: rgba(244, 67, 54, 0.1);
      color: var(--danger-color);
      border-left: 4px solid var(--danger-color);
    }

    .recommendations {
      margin-bottom: 2rem;
    }

    .recommendation-card {
      background: var(--background);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1rem;
      border-left: 4px solid var(--primary-color);
    }

    .recommendation-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin: 0 0 0.5rem;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .recommendation-content {
      color: var(--text-secondary);
      line-height: 1.6;
      margin: 0;
    }

    .when-to-see-doctor {
      background: rgba(255, 152, 0, 0.1);
      border-left: 4px solid var(--warning-color);
      padding: 1.5rem;
      border-radius: 0 8px 8px 0;
      margin: 1.5rem 0;
    }

    .when-to-see-doctor h4 {
      color: var(--warning-color);
      margin: 0 0 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .when-to-see-doctor ul {
      margin: 0;
      padding-left: 1.5rem;
      color: var(--text-secondary);
    }

    .when-to-see-doctor li {
      margin-bottom: 0.5rem;
      line-height: 1.5;
    }

    .related-remedies {
      margin-top: 2rem;
    }

    .remedy-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--gradient-primary);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 500;
      transition: all 0.3s ease;
      margin: 0.25rem;
    }

    .remedy-link:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }

    /* Loading Animation */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 3rem 1rem;
      color: var(--text-secondary);
    }

    .empty-state i {
      font-size: 4rem;
      margin-bottom: 1rem;
      opacity: 0.5;
    }

    .empty-state h3 {
      font-size: 1.2rem;
      margin: 0 0 0.5rem;
      color: var(--text-primary);
    }

    .empty-state p {
      margin: 0;
      font-size: 0.9rem;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }

      .symptom-section {
        padding: 1.5rem;
      }

      .results-content {
        padding: 1.5rem;
      }

      .symptom-suggestions {
        justify-content: center;
      }
    }

    @media (max-width: 480px) {
      .app-header {
        padding: 1rem;
      }

      .header-title {
        font-size: 1.2rem;
      }

      .symptom-section {
        padding: 1rem;
      }

      .results-content {
        padding: 1rem;
      }
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
      :root {
        --text-primary: #ffffff;
        --text-secondary: #b0b0b0;
        --background: #121212;
        --surface: #1e1e1e;
        --border-color: #333333;
      }

      body {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="app-header">
    <div class="header-left">
      <button class="back-btn" onclick="goBack()">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1 class="header-title">AI Symptom Checker</h1>
    </div>
    
    <div class="header-right">
      <div class="ai-indicator">
        <div class="ai-dot"></div>
        <span>AI Powered</span>
      </div>
    </div>
  </header>

  <!-- Navigation -->
  <nav>
    <a href="3 home.html">Home</a>
    <a href="remedies_enhanced.html">Remedies</a>
    <a href="firstaid.html">First Aid</a>
    <a href="suggestions.html" class="active">Symptom Checker</a>
    <a href="emergency_enhanced.html">Emergency</a>
  </nav>

  <!-- Main Container -->
  <main class="container">
    <!-- Symptom Input Section -->
    <section class="symptom-section">
      <h2 class="section-title">
        <i class="fas fa-stethoscope"></i>
        Describe Your Symptoms
      </h2>
      
      <div class="symptom-input">
        <i class="fas fa-search"></i>
        <input type="text" id="symptomInput" placeholder="Enter your symptoms (e.g., headache, fever, nausea)..." />
      </div>
      
      <div class="symptom-suggestions">
        <span class="suggestion-tag" onclick="addSymptom('headache')">Headache</span>
        <span class="suggestion-tag" onclick="addSymptom('fever')">Fever</span>
        <span class="suggestion-tag" onclick="addSymptom('cough')">Cough</span>
        <span class="suggestion-tag" onclick="addSymptom('nausea')">Nausea</span>
        <span class="suggestion-tag" onclick="addSymptom('fatigue')">Fatigue</span>
        <span class="suggestion-tag" onclick="addSymptom('sore throat')">Sore Throat</span>
        <span class="suggestion-tag" onclick="addSymptom('body aches')">Body Aches</span>
        <span class="suggestion-tag" onclick="addSymptom('shortness of breath')">Shortness of Breath</span>
        <span class="suggestion-tag" onclick="addSymptom('seasonal allergies')">Allergies</span>
        <span class="suggestion-tag" onclick="addSymptom('constipation')">Constipation</span>
        <span class="suggestion-tag" onclick="addSymptom('knee pain')">Knee Pain</span>
        <span class="suggestion-tag" onclick="addSymptom('stress')">Stress</span>
        <span class="suggestion-tag" onclick="addSymptom('dry skin')">Dry Skin</span>
      </div>
      
      <button class="check-button" id="checkButton" onclick="checkSymptoms()">
        <i class="fas fa-search"></i>
        Check Symptoms
      </button>
    </section>

    <!-- Selected Symptoms -->
    <div class="selected-symptoms" id="selectedSymptoms">
      <h3 class="section-title">
        <i class="fas fa-list"></i>
        Selected Symptoms
      </h3>
      <div id="selectedSymptomsList"></div>
    </div>

    <!-- Results Section -->
    <div class="results-section" id="resultsSection">
      <div class="results-header">
        <h2 class="results-title">Symptom Analysis Complete</h2>
        <p class="results-subtitle">AI-powered health assessment and recommendations</p>
      </div>
      
      <div class="results-content">
        <!-- Results will be populated by JavaScript -->
      </div>
    </div>
  </main>

  <script>
    // Global variables
    let currentUser = null;
    let selectedSymptoms = [];

    // Comprehensive symptom database
    const baseSymptomData = {
      'headache': {
        severity: 'medium',
        description: 'Pain or discomfort in the head or neck area',
        commonCauses: ['Tension', 'Dehydration', 'Stress', 'Eye strain', 'Sinus pressure'],
        recommendations: [
          {
            title: 'Immediate Relief',
            content: 'Apply a cold compress to your forehead for 15-20 minutes. Stay hydrated by drinking plenty of water.'
          },
          {
            title: 'Rest and Relaxation',
            content: 'Find a quiet, dark room to rest. Practice deep breathing exercises or gentle neck stretches.'
          },
          {
            title: 'Natural Remedies',
            content: 'Try peppermint oil on temples, ginger tea, or acupressure points on your head and neck.'
          }
        ],
        whenToSeeDoctor: [
          'Sudden, severe headache (thunderclap headache)',
          'Headache with fever, neck stiffness, or rash',
          'Headache after head injury',
          'Persistent headache for several days',
          'Headache with vision changes or confusion'
        ],
        relatedRemedies: ['honey-cough', 'ginger-tea', 'turmeric-milk']
      },
      'fever': {
        severity: 'medium',
        description: 'Elevated body temperature above normal range',
        commonCauses: ['Viral infections', 'Bacterial infections', 'Inflammatory conditions', 'Heat exhaustion'],
        recommendations: [
          {
            title: 'Temperature Management',
            content: 'Take your temperature regularly. Use a cool, damp cloth on your forehead and neck.'
          },
          {
            title: 'Hydration',
            content: 'Drink plenty of fluids - water, herbal teas, or electrolyte solutions to prevent dehydration.'
          },
          {
            title: 'Rest and Comfort',
            content: 'Get plenty of rest in a cool, well-ventilated room. Wear lightweight, breathable clothing.'
          }
        ],
        whenToSeeDoctor: [
          'Fever above 103°F (39.4°C) in adults',
          'Fever lasting more than 3 days',
          'Fever with severe headache or neck stiffness',
          'Fever with difficulty breathing',
          'Fever in infants under 3 months'
        ],
        relatedRemedies: ['turmeric-milk', 'ginger-tea', 'honey-cough']
      },
      'cough': {
        severity: 'low',
        description: 'Reflex action to clear airways of mucus and irritants',
        commonCauses: ['Common cold', 'Flu', 'Allergies', 'Smoke irritation', 'Post-nasal drip'],
        recommendations: [
          {
            title: 'Throat Soothing',
            content: 'Drink warm liquids like honey tea, chicken soup, or herbal teas to soothe your throat.'
          },
          {
            title: 'Humidity and Hydration',
            content: 'Use a humidifier or take steamy showers. Stay well-hydrated to thin mucus secretions.'
          },
          {
            title: 'Natural Remedies',
            content: 'Try honey with lemon, ginger tea, or throat lozenges. Avoid irritants like smoke and dust.'
          }
        ],
        whenToSeeDoctor: [
          'Cough lasting more than 2-3 weeks',
          'Cough with blood or colored mucus',
          'Cough with chest pain or difficulty breathing',
          'Cough with fever above 100.4°F (38°C)',
          'Cough that interferes with sleep'
        ],
        relatedRemedies: ['honey-cough', 'ginger-tea', 'turmeric-milk']
      },
      'nausea': {
        severity: 'medium',
        description: 'Feeling of sickness with inclination to vomit',
        commonCauses: ['Motion sickness', 'Food poisoning', 'Pregnancy', 'Migraine', 'Anxiety'],
        recommendations: [
          {
            title: 'Immediate Relief',
            content: 'Sip ginger tea or chew ginger candies. Try acupressure on the wrist (P6 point).'
          },
          {
            title: 'Dietary Adjustments',
            content: 'Eat bland foods like crackers, rice, or bananas. Avoid spicy, fatty, or strong-smelling foods.'
          },
          {
            title: 'Positioning and Breathing',
            content: 'Sit upright or lie on your side. Practice slow, deep breathing to calm your stomach.'
          }
        ],
        whenToSeeDoctor: [
          'Severe nausea with vomiting for more than 24 hours',
          'Nausea with severe abdominal pain',
          'Nausea with signs of dehydration',
          'Nausea with fever and diarrhea',
          'Nausea with chest pain or shortness of breath'
        ],
        relatedRemedies: ['ginger-tea', 'turmeric-milk']
      },
      'fatigue': {
        severity: 'low',
        description: 'Extreme tiredness and lack of energy',
        commonCauses: ['Poor sleep', 'Stress', 'Anemia', 'Thyroid issues', 'Depression'],
        recommendations: [
          {
            title: 'Sleep Optimization',
            content: 'Maintain a consistent sleep schedule. Aim for 7-9 hours of quality sleep per night.'
          },
          {
            title: 'Energy Boosting',
            content: 'Eat regular, balanced meals. Stay hydrated and consider gentle exercise like walking.'
          },
          {
            title: 'Stress Management',
            content: 'Practice relaxation techniques like meditation or yoga. Take regular breaks throughout the day.'
          }
        ],
        whenToSeeDoctor: [
          'Persistent fatigue for more than 2 weeks',
          'Fatigue with unexplained weight loss',
          'Fatigue with depression or anxiety',
          'Fatigue with muscle weakness',
          'Fatigue that interferes with daily activities'
        ],
        relatedRemedies: ['turmeric-milk', 'ginger-tea']
      },
      'sore throat': {
        severity: 'low',
        description: 'Pain, irritation, or scratchiness in the throat',
        commonCauses: ['Viral infections', 'Bacterial infections', 'Allergies', 'Dry air', 'Acid reflux'],
        recommendations: [
          {
            title: 'Throat Relief',
            content: 'Gargle with warm salt water 3-4 times daily. Drink warm herbal teas with honey.'
          },
          {
            title: 'Humidity and Hydration',
            content: 'Use a humidifier to add moisture to the air. Stay well-hydrated with warm liquids.'
          },
          {
            title: 'Natural Remedies',
            content: 'Try throat lozenges, marshmallow root tea, or licorice root for natural soothing.'
          }
        ],
        whenToSeeDoctor: [
          'Severe sore throat lasting more than a week',
          'Sore throat with difficulty swallowing or breathing',
          'Sore throat with fever above 101°F (38.3°C)',
          'Sore throat with white patches or pus',
          'Sore throat with swollen lymph nodes'
        ],
        relatedRemedies: ['honey-cough', 'ginger-tea']
      }
      ,
      'body aches': {
        severity: 'low',
        description: 'Generalized pain or discomfort in the muscles and joints',
        commonCauses: ['Flu', 'Viral infections', 'Overexertion', 'Dehydration', 'Stress'],
        recommendations: [
          {
            title: 'Rest and Recovery',
            content: 'Get plenty of rest and avoid strenuous activities. Allow your body time to heal.'
          },
          {
            title: 'Hydration',
            content: 'Drink water and electrolyte-rich fluids to stay hydrated and support muscle recovery.'
          },
          {
            title: 'Warm Compress',
            content: 'Apply a warm compress or take a warm bath to soothe sore muscles.'
          }
        ],
        whenToSeeDoctor: [
          'Severe body aches with high fever',
          'Body aches lasting more than a week',
          'Aches with swelling or redness',
          'Aches with difficulty breathing or chest pain'
        ],
        relatedRemedies: ['turmeric-milk', 'ginger-tea']
      },
      'shortness of breath': {
        severity: 'high',
        description: 'Difficulty breathing or feeling unable to get enough air',
        commonCauses: ['Asthma', 'Allergies', 'Anxiety', 'Respiratory infections', 'Heart conditions'],
        recommendations: [
          {
            title: 'Calm Breathing',
            content: 'Sit upright and try slow, deep breaths. Use pursed-lip breathing to ease airflow.'
          },
          {
            title: 'Avoid Triggers',
            content: 'Stay away from smoke, dust, or allergens. Use prescribed inhalers if you have asthma.'
          },
          {
            title: 'Seek Fresh Air',
            content: 'Open a window or go outside for fresh air if safe to do so.'
          }
        ],
        whenToSeeDoctor: [
          'Sudden or severe shortness of breath',
          'Shortness of breath with chest pain',
          'Difficulty speaking or blue lips',
          'Shortness of breath at rest'
        ],
        relatedRemedies: ['ginger-tea']
      },
      'dizziness': {
        severity: 'medium',
        description: 'Feeling lightheaded, unsteady, or faint',
        commonCauses: ['Dehydration', 'Low blood pressure', 'Inner ear issues', 'Low blood sugar', 'Anxiety'],
        recommendations: [
          {
            title: 'Sit or Lie Down',
            content: 'Sit or lie down immediately to prevent falls. Rest until the dizziness passes.'
          },
          {
            title: 'Hydrate',
            content: 'Drink water or electrolyte drinks, especially if you suspect dehydration.'
          },
          {
            title: 'Slow Movements',
            content: 'Stand up slowly from sitting or lying positions to avoid sudden drops in blood pressure.'
          }
        ],
        whenToSeeDoctor: [
          'Dizziness with chest pain or palpitations',
          'Dizziness with fainting or loss of consciousness',
          'Persistent or worsening dizziness',
          'Dizziness with severe headache or vision changes'
        ],
        relatedRemedies: ['ginger-tea']
      },
      'vomiting': {
        severity: 'medium',
        description: 'Forceful expulsion of stomach contents through the mouth',
        commonCauses: ['Food poisoning', 'Stomach flu', 'Migraine', 'Pregnancy', 'Motion sickness'],
        recommendations: [
          {
            title: 'Hydration',
            content: 'Sip clear fluids like water, oral rehydration solutions, or ginger tea to prevent dehydration.'
          },
          {
            title: 'Rest Stomach',
            content: 'Avoid solid foods for a few hours. Gradually reintroduce bland foods like crackers or rice.'
          },
          {
            title: 'Monitor Symptoms',
            content: 'Track frequency and duration. Seek medical help if vomiting persists.'
          }
        ],
        whenToSeeDoctor: [
          'Vomiting blood or coffee-ground material',
          'Severe abdominal pain',
          'Signs of dehydration (dry mouth, no urination)',
          'Vomiting lasting more than 24 hours'
        ],
        relatedRemedies: ['ginger-tea', 'turmeric-milk']
      },
      'diarrhea': {
        severity: 'medium',
        description: 'Frequent, loose, or watery bowel movements',
        commonCauses: ['Infections', 'Food intolerance', 'Medications', 'Stress', 'Digestive disorders'],
        recommendations: [
          {
            title: 'Fluid Replacement',
            content: 'Drink water, clear broths, or oral rehydration solutions to replace lost fluids.'
          },
          {
            title: 'BRAT Diet',
            content: 'Eat bananas, rice, applesauce, and toast to help firm stools.'
          },
          {
            title: 'Avoid Irritants',
            content: 'Stay away from dairy, fatty, or spicy foods until symptoms improve.'
          }
        ],
        whenToSeeDoctor: [
          'Diarrhea lasting more than 2 days',
          'Blood in stool',
          'Severe abdominal pain or fever',
          'Signs of dehydration'
        ],
        relatedRemedies: ['ginger-tea']
      },
      'chest pain': {
        severity: 'high',
        description: 'Discomfort or pain in the chest area',
        commonCauses: ['Heart conditions', 'Muscle strain', 'Anxiety', 'Acid reflux', 'Respiratory infections'],
        recommendations: [
          {
            title: 'Rest',
            content: 'Sit down and rest. Avoid physical exertion until pain subsides.'
          },
          {
            title: 'Monitor Symptoms',
            content: 'Note the duration, intensity, and triggers of pain. Seek immediate help if severe.'
          },
          {
            title: 'Avoid Triggers',
            content: 'Avoid heavy meals, caffeine, or stress if these worsen your symptoms.'
          }
        ],
        whenToSeeDoctor: [
          'Chest pain with shortness of breath or sweating',
          'Pain radiating to arm, neck, or jaw',
          'Severe or sudden chest pain',
          'Chest pain with dizziness or fainting'
        ],
        relatedRemedies: []
      },
      'rash': {
        severity: 'low',
        description: 'Change in skin color, texture, or appearance',
        commonCauses: ['Allergies', 'Infections', 'Heat', 'Medications', 'Irritants'],
        recommendations: [
          {
            title: 'Cool Compress',
            content: 'Apply a cool, damp cloth to the affected area to reduce itching and inflammation.'
          },
          {
            title: 'Avoid Scratching',
            content: 'Keep nails trimmed and avoid scratching to prevent infection.'
          },
          {
            title: 'Gentle Skin Care',
            content: 'Use mild, fragrance-free soaps and moisturizers.'
          }
        ],
        whenToSeeDoctor: [
          'Rash with fever or pain',
          'Rash spreading rapidly',
          'Rash with blisters or open sores',
          'Rash with difficulty breathing or swelling'
        ],
        relatedRemedies: []
      }
    };

    const symptomLookup = {};
    const symptomAliases = new Map();

    const generatedSymptomTemplates = [
      {
        names: ['seasonal allergies', 'sinus congestion', 'hay fever', 'post nasal drip', 'runny nose', 'ear fullness'],
        severity: 'low',
        description: (name) => `${capitalize(name)} can cause itchy eyes, sneezing, and stuffy breathing passages.`,
        recommendations: [
          { title: 'Rinse & Humidify', content: 'Use saline sprays or warm showers to soothe irritated sinuses.' },
          { title: 'Allergen Shield', content: 'Close windows on high pollen days and wash bedding weekly.' },
          { title: 'Gentle Support', content: 'Sip warm teas with honey or turmeric for natural relief.' }
        ],
        whenToSeeDoctor: [
          'Symptoms lasting more than 10 days',
          'Facial pain or fever develops',
          'Breathing difficulty or wheezing'
        ],
        relatedRemedies: ['turmeric-milk', 'ginger-tea'],
        keywords: ['allergy', 'pollen', 'congestion']
      },
      {
        names: ['constipation', 'acid reflux', 'bloating', 'gastritis', 'indigestion', 'loss of appetite'],
        severity: 'medium',
        description: (name) => `${capitalize(name)} is a common digestive discomfort that improves with gentle dietary care.`,
        recommendations: [
          { title: 'Warm Hydration', content: 'Drink warm water with lemon or mint to stimulate digestion.' },
          { title: 'Fiber & Balance', content: 'Choose fruits, vegetables, and whole grains while limiting heavy meals.' },
          { title: 'Slow Meals', content: 'Eat in calm settings and chew slowly to reduce stomach strain.' }
        ],
        whenToSeeDoctor: [
          'Persistent pain or blood in stool',
          'Unintentional weight loss',
          'Symptoms lasting longer than two weeks'
        ],
        relatedRemedies: ['soothing-digestive-tonic', 'ginger-tea'],
        keywords: ['stomach', 'digestive', 'gas', 'reflux']
      },
      {
        names: ['knee pain', 'shoulder stiffness', 'low back pain', 'neck strain', 'sciatica', 'wrist pain'],
        severity: 'medium',
        description: (name) => `${capitalize(name)} often results from posture, overuse, or minor injury.`,
        recommendations: [
          { title: 'Rest & Support', content: 'Alternate gentle movement with rest, using cushions or braces as needed.' },
          { title: 'Heat & Cool', content: 'Apply cold packs for swelling and warm compresses for stiffness.' },
          { title: 'Mindful Movement', content: 'Stretch slowly and practice alignment-focused exercises or yoga.' }
        ],
        whenToSeeDoctor: [
          'Severe pain or swelling',
          'Numbness or weakness in limbs',
          'Pain after a fall or accident'
        ],
        relatedRemedies: ['turmeric-milk', 'magnesium-soak'],
        keywords: ['joint', 'muscle', 'strain', 'ache']
      },
      {
        names: ['stress', 'anxiety', 'burnout', 'overwhelm', 'restlessness'],
        severity: 'medium',
        description: (name) => `${capitalize(name)} can impact sleep, focus, and mood.`,
        recommendations: [
          { title: 'Breathing Rituals', content: 'Practice 4-7-8 breathing or short meditation breaks.' },
          { title: 'Digital Boundaries', content: 'Unplug 30 minutes before bed and create a calm evening routine.' },
          { title: 'Nourish & Move', content: 'Eat balanced meals and take short walks to release tension.' }
        ],
        whenToSeeDoctor: [
          'Persistent anxiety interfering with daily life',
          'Panic attacks or chest discomfort',
          'Trouble sleeping for more than two weeks'
        ],
        relatedRemedies: ['lavender-sleep-spray', 'chamomile-tea'],
        keywords: ['stress', 'anxiety', 'nerves', 'panic']
      },
      {
        names: ['insomnia', 'jet lag', 'nighttime restlessness', 'midnight waking', 'light sleep'],
        severity: 'low',
        description: (name) => `${capitalize(name)} makes it hard to fall or stay asleep, but calming habits can help.`,
        recommendations: [
          { title: 'Sleep Hygiene', content: 'Keep the bedroom cool, dark, and screen-free.' },
          { title: 'Wind-Down Ritual', content: 'Try teas, journaling, or gentle stretches before bed.' },
          { title: 'Consistent Schedule', content: 'Wake and sleep at the same time daily to reset your clock.' }
        ],
        whenToSeeDoctor: [
          'Insomnia lasting more than 3 weeks',
          'Daytime sleep attacks or snoring',
          'Need for sleep medications nightly'
        ],
        relatedRemedies: ['lavender-sleep-spray', 'golden-milk'],
        keywords: ['sleep', 'rest', 'melatonin']
      },
      {
        names: ['dry skin', 'sunburn', 'acne flare', 'eczema flare', 'bug bites', 'scalp itch'],
        severity: 'low',
        description: (name) => `${capitalize(name)} can improve with gentle skincare and hydration.`,
        recommendations: [
          { title: 'Cool Compress', content: 'Soothe inflamed areas with cool, damp cloths or aloe vera gel.' },
          { title: 'Moisture Barrier', content: 'Use fragrance-free moisturizers or oils after bathing.' },
          { title: 'Protect & Avoid', content: 'Wear SPF, avoid scratching, and identify triggers like fabric or detergents.' }
        ],
        whenToSeeDoctor: [
          'Rash with fever or infection signs',
          'Spreading redness or swelling',
          'Skin changes that do not heal'
        ],
        relatedRemedies: ['aloe-vera-burns', 'turmeric-milk'],
        keywords: ['skin', 'rash', 'itch', 'irritation']
      },
      {
        names: ['dehydration', 'low blood pressure', 'lightheadedness', 'heat exhaustion', 'cramps'],
        severity: 'medium',
        description: (name) => `${capitalize(name)} may stem from fluid or electrolyte imbalance.`,
        recommendations: [
          { title: 'Hydration Plan', content: 'Sip water with electrolytes, coconut water, or broths throughout the day.' },
          { title: 'Mineral Support', content: 'Include magnesium-rich foods like leafy greens or pumpkin seeds.' },
          { title: 'Cool Down', content: 'Rest in shaded spaces and loosen clothing to recover.' }
        ],
        whenToSeeDoctor: [
          'Fainting or persistent dizziness',
          'Confusion or rapid heartbeat',
          'Inability to keep fluids down'
        ],
        relatedRemedies: ['hydration-tonic', 'electrolyte-elixir'],
        keywords: ['thirst', 'dizzy', 'electrolyte']
      },
      {
        names: ['menstrual cramps', 'pms mood swings', 'hormonal headaches', 'perimenopause hot flashes'],
        severity: 'medium',
        description: (name) => `${capitalize(name)} is influenced by hormonal shifts and lifestyle factors.`,
        recommendations: [
          { title: 'Warm Comfort', content: 'Use heating pads or warm baths to relax muscles.' },
          { title: 'Cycle-Smart Nutrition', content: 'Eat iron-rich foods, omega-3s, and stay hydrated.' },
          { title: 'Mind-Body Care', content: 'Practice light yoga, breathing, or journaling to ease stress.' }
        ],
        whenToSeeDoctor: [
          'Severe cramps unrelieved by home care',
          'Bleeding heavier than usual',
          'Symptoms disrupting daily life'
        ],
        relatedRemedies: ['magnesium-soak', 'ginger-tea'],
        keywords: ['period', 'cycle', 'hormone', 'pms']
      }
    ];

    function registerSymptomEntry(entry) {
      const slug = entry.slug || entry.name.toLowerCase();
      const formatted = {
        slug,
        name: entry.name || capitalize(slug),
        severity: entry.severity || 'low',
        description: entry.description || '',
        commonCauses: entry.commonCauses || entry.common_causes || [],
        recommendations: (entry.recommendations || []).map(rec => ({ ...rec })),
        whenToSeeDoctor: [...(entry.whenToSeeDoctor || [])],
        relatedRemedies: entry.relatedRemedies || [],
        keywords: Array.from(new Set([slug, ...(entry.keywords || [])].map(keyword => keyword.toLowerCase())))
      };
      symptomLookup[slug] = formatted;
      formatted.keywords.forEach(keyword => symptomAliases.set(keyword.toLowerCase(), slug));
    }

    Object.entries(baseSymptomData).forEach(([key, value]) => {
      registerSymptomEntry({
        slug: key,
        name: capitalize(key),
        severity: value.severity,
        description: value.description,
        recommendations: value.recommendations,
        whenToSeeDoctor: value.whenToSeeDoctor,
        relatedRemedies: value.relatedRemedies || [],
        keywords: value.commonCauses
      });
    });

    generatedSymptomTemplates.forEach(template => {
      template.names.forEach(name => {
        registerSymptomEntry({
          slug: name.toLowerCase(),
          name: capitalize(name),
          severity: template.severity,
          description: template.description(name),
          recommendations: template.recommendations,
          whenToSeeDoctor: template.whenToSeeDoctor,
          relatedRemedies: template.relatedRemedies,
          keywords: template.keywords
        });
      });
    });

    cacheSymptomsForAssistant();

    function cacheSymptomsForAssistant() {
      try {
        const uniqueEntries = Object.values(symptomLookup).filter((entry, index, array) => array.findIndex(item => item.slug === entry.slug) === index);
        localStorage.setItem('symptomsData', JSON.stringify(uniqueEntries));
      } catch (err) {
        console.warn('Unable to cache symptom dataset', err);
      }
    }

    function capitalize(text = '') {
      return text.charAt(0).toUpperCase() + text.slice(1);
    }

    document.addEventListener('DOMContentLoaded', function() {
      initializeUser();
      initializeSymptomInput();
    });

    // User initialization
    function initializeUser() {
      currentUser = localStorage.getItem('loggedInUser');
    }

    // Initialize symptom input
    function initializeSymptomInput() {
      const input = document.getElementById('symptomInput');
      
      input.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          addSymptomFromInput();
        }
      });
    }

    // Add symptom from input
    function addSymptomFromInput() {
      const input = document.getElementById('symptomInput');
      const symptom = input.value.trim();
      
      if (symptom) {
        addSymptom(symptom);
        input.value = '';
      }
    }

    // Add symptom to list
    function addSymptom(symptom) {
      const resolved = resolveSymptomKey(symptom);
      const entry = symptomLookup[resolved];
      
      if (!entry) {
        alert(`"${symptom}" isn't in our database yet, but we'll keep improving!`);
        return;
      }
      
      if (!selectedSymptoms.includes(resolved)) {
        selectedSymptoms.push(resolved);
        updateSelectedSymptomsDisplay();
      }
    }

    function resolveSymptomKey(symptom) {
      const lower = symptom.toLowerCase().trim();
      if (symptomLookup[lower]) return lower;
      if (symptomAliases.has(lower)) return symptomAliases.get(lower);
      for (const [keyword, slug] of symptomAliases.entries()) {
        if (lower.includes(keyword)) {
          return slug;
        }
      }
      return lower;
    }

    function formatSymptomLabel(slug) {
      return symptomLookup[slug]?.name || capitalize(slug);
    }

    // Remove symptom from list
    function removeSymptom(symptom) {
      selectedSymptoms = selectedSymptoms.filter(s => s !== symptom);
      updateSelectedSymptomsDisplay();
    }

    // Update selected symptoms display
    function updateSelectedSymptomsDisplay() {
      const container = document.getElementById('selectedSymptoms');
      const list = document.getElementById('selectedSymptomsList');
      
      if (selectedSymptoms.length === 0) {
        container.classList.remove('show');
        return;
      }
      
      container.classList.add('show');
      list.innerHTML = selectedSymptoms.map(symptom => `
        <span class="selected-symptom">
          ${formatSymptomLabel(symptom)}
          <button class="remove-btn" onclick="removeSymptom('${symptom}')">
            <i class="fas fa-times"></i>
          </button>
        </span>
      `).join('');
    }

    // Check symptoms
    function checkSymptoms() {
      if (selectedSymptoms.length === 0) {
        alert('Please add at least one symptom before checking.');
        return;
      }

      const button = document.getElementById('checkButton');
      button.classList.add('loading');
      button.disabled = true;
      button.innerHTML = '<div class="loading-spinner"></div> Analyzing symptoms...';

      // Simulate AI processing time
      setTimeout(() => {
        generateRecommendations();
        button.classList.remove('loading');
        button.disabled = false;
        button.innerHTML = '<i class="fas fa-search"></i> Check Symptoms';
      }, 2000);
    }

    // Generate recommendations
    function generateRecommendations() {
      const resultsSection = document.getElementById('resultsSection');
      const resultsContent = resultsSection.querySelector('.results-content');
      
      // Calculate overall severity
      const severities = selectedSymptoms.map(symptom => {
        const data = symptomLookup[symptom];
        return data ? data.severity : 'low';
      });
      
      const severityCounts = severities.reduce((acc, severity) => {
        acc[severity] = (acc[severity] || 0) + 1;
        return acc;
      }, {});
      
      let overallSeverity = 'low';
      if (severityCounts.high > 0 || severityCounts.medium > 2) {
        overallSeverity = 'high';
      } else if (severityCounts.medium > 0) {
        overallSeverity = 'medium';
      }

      // Generate content
      let content = `
        <div class="severity-indicator ${overallSeverity}">
          <i class="fas fa-${overallSeverity === 'high' ? 'exclamation-triangle' : overallSeverity === 'medium' ? 'exclamation-circle' : 'info-circle'}"></i>
          <span>Overall Severity: ${overallSeverity.charAt(0).toUpperCase() + overallSeverity.slice(1)}</span>
        </div>
      `;

      // Add recommendations for each symptom
      selectedSymptoms.forEach(symptom => {
        const data = symptomLookup[symptom];
        if (data) {
          content += `
            <div class="recommendations">
              <h3 style="margin: 0 0 1rem; color: var(--text-primary);">${formatSymptomLabel(symptom)}</h3>
              <p style="color: var(--text-secondary); margin: 0 0 1rem; line-height: 1.6;">${data.description}</p>
              ${data.commonCauses && data.commonCauses.length ? `<p style="color: var(--text-secondary); margin: 0 0 1.5rem; font-size: 0.9rem;"><strong>Common causes:</strong> ${data.commonCauses.join(', ')}</p>` : ''}
          `;

          data.recommendations.forEach(rec => {
            content += `
              <div class="recommendation-card">
                <h4 class="recommendation-title">
                  <i class="fas fa-lightbulb"></i>
                  ${rec.title}
                </h4>
                <p class="recommendation-content">${rec.content}</p>
              </div>
            `;
          });

          content += `
            <div class="when-to-see-doctor">
              <h4><i class="fas fa-user-md"></i> When to See a Doctor</h4>
              <ul>
                ${data.whenToSeeDoctor.map(item => `<li>${item}</li>`).join('')}
              </ul>
            </div>
          </div>
          `;
        }
      });

      // Add related remedies
      const allRelatedRemedies = [...new Set(selectedSymptoms.flatMap(symptom => {
        const data = symptomLookup[symptom];
        return data ? data.relatedRemedies : [];
      }))];

      if (allRelatedRemedies.length > 0) {
        content += `
          <div class="related-remedies">
            <h4 style="margin: 0 0 1rem; color: var(--text-primary);">Related Natural Remedies</h4>
            ${allRelatedRemedies.map(remedyId => `
              <a href="remedies_enhanced.html#${remedyId}" class="remedy-link">
                <i class="fas fa-leaf"></i>
                View Remedy
              </a>
            `).join('')}
          </div>
        `;
      }

      // Add disclaimer
      content += `
        <div style="background: rgba(255, 152, 0, 0.1); padding: 1rem; border-radius: 8px; margin-top: 2rem; border-left: 4px solid var(--warning-color);">
          <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.5;">
            <strong style="color: var(--warning-color);">Important:</strong> This AI symptom checker is for informational purposes only and should not replace professional medical advice, diagnosis, or treatment. Always consult with a healthcare provider for medical concerns.
          </p>
        </div>
      `;

      resultsContent.innerHTML = content;
      resultsSection.classList.add('show');
      
      // Scroll to results
      resultsSection.scrollIntoView({ behavior: 'smooth' });
    }

    // Navigation
    function goBack() {
      window.history.back();
    }
  </script>
</body>
</html>
